{% extends 'base.html' %}
{% block content %} 
<div class="content" id="container">
    <div class="container-fluid">
        <!--message alert -->
        {% if messages %}
            {% for message in messages %}
                {%include 'app/alerts/alert.html'%}
            {% endfor %}
        {% endif %}
        <form method="POST"  action="{% url 'planning' %}">
            <!-- Security token by Django -->
            {% csrf_token %}
            <div class="row">
                <div class="col-2 offset-1">
                    <div class="card card-row" >
                        <div class="card-header"style="background-color:#2c7da0; color:white;">
                            <h3 class="card-title">
                            Divisions
                            </h3>
                        </div>
                        <div class="card-body">
                            <select name="division_name" size="1"  class="custom-select form-control-border" id="exampleSelectBorder" required>
                                {% for item in divisions_list %}
                                <option value="{{item.name}}" {% if division == item.name %} selected {% endif %}>{{item.name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-2">
                    <div class="card card-row">
                        <div class="card-header" style="background-color:#2a9d8f; color:white;">
                            <h3 class="card-title">
                            Profit Center
                            </h3>
                        </div>
                        <div class="card-body">
                            <select name="center_profit" size="1" size="1"  class="custom-select form-control-border" id="exampleSelectBorder">
                                {% for item in center_profit_list %}
                                <option value="{{item.Profit_center}}" {% if item.Profit_center in profit_center%} selected {% endif %}>{{item.Profit_center}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                    </div>
                </div>
                <div class="col-2">
                    <div class="card card-row card-info">
                        <div class="card-header card-info">
                            <h3 class="card-title">
                            Planning
                            </h3>
                        </div>
                            <div class="card-body">
                                    <select name="planning" size="1" size="1"  class="custom-select form-control-border" id="exampleSelectBorder">
                                        {% for item in planning_list %}
                                            <option value="{{item.planning}}" {% if item.planning in planning   %} selected {% endif %} > {{item.planning}}</option>
                                        {% endfor %}
                                    </select> 
                            </div>
                    </div>
                </div>

                <div class="col-2">
                    <div class="card card-row">
                        <div class="card-header" style="background-color:#006d77; color:white;">
                            <h3 class="card-title">
                           Materials
                            </h3>
                        </div>                           
                        <div class="card-body">
                            <div class="select2-primary" >
                                    <select name="material" size="1"id="material"class="select2 select2-hidden-accessible" multiple="" data-placeholder="* Multiple" data-dropdown-css-class="select2-primary"   style="width: 100%;">
                                    {%for item in material_list  %}
                                        <option value ="{{item.material}}" {% if item.material in material_selected  %} selected {% endif %}>{{item.material}}</option> 
                                    {%endfor%}
                                </select> 
                            </div>
                        </div>
                    </div>
                </div>
     

                <div class="col-2">
                    <div class="card card-row">
                        <div class="card-header" style="background-color:#0077b6; color:white;">
                            <h3 class="card-title">
                                Smooth Family
                            </h3>
                        </div>                           
                        <div class="card-body">

                            <div class="select2-primary" >
                                <select name="smooth_family" id="smooth_family" size="1" class="select2 select2-hidden-accessible" multiple="" data-placeholder="* Multiple" data-dropdown-css-class="select2-primary" style="width: 100%;">
                                {%for item in smooth_family_list %}
                                    <option value ="{{item.Smooth_Family}}"{% if item.Smooth_Family in smooth_family_selected  %} selected {% endif %}>{{item.Smooth_Family}}</option> 
                                {%endfor%}
                                </select> 
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <br>
            <div class="row">
                <div class="col-4 offset-4">
                    <div class="input-group">
                        <span class="input-group-text">From</span>
                        <input name="from" id="from" type="date" class=" form-control" value="{{from_date}}" required>
                        <span class="input-group-text">To</span>
                        <input name="to" id="to" type="date" class=" form-control" value="{{to_date}}" required> 
                        <div class="input-group-prepend">
                            <button type="submit" class="btn btn-default" style="color:#4285f4;border-radius: 0 8px 8px 0;background-color: white;border: 1px solid #ced4da" > 
                                <i class="fa-solid fa-magnifying-glass" style="color:#4285f4 ;"></i>
                                Go!
                            </button>
                        </div>
                      </div>          
                </div>
            </div>
        </form>
        <!-- Switch Month Week button  -->
        <button onclick="myFunction()" id="switch_month_week"  class= "switch_week_month">
                <i  class="fa-solid fa-repeat"></i>
                <b id="text_switch">M</b>
        </button>

    </div>
</div>
<br>
<hr>


<!-- <div class="col-12">
    <div class="info-box">
        <span class="info-box-icon bg-info elevation-1"><i class="fa-regular fa-compass"></i></span>
        <div class="info-box-content">
            <span class="info-box-text">Demand vs. Production</span>
       </div>
    </div>
</div> -->


<div  class="row">
    <div class="col-12">
        <div class="card card-primary card-outline">
            <div class="card-header">
              <h3 class="card-title">
                <i class="far fa-chart-bar"></i>
                    Demand | Production
                </h3>
                <div class="card-tools"> 
                    <ul class="list-group list-group-horizontal" style="height: 35px;">
                        <li class="list-group-item" style="padding:4px;"><i type="button" data-toggle="modal" data-target="#test_stocked " class="info fas fa-info-circle" style="margin-bottom:7px;"></i></li>
                        <li class="list-group-item" style="padding:3px;"><button type="button" class="btn btn-tool" data-card-widget="collapse" style="padding:3px;padding-top: 0px;">
                            <i class="fas fa-minus"></i></button></li>
                        <li class="list-group-item" style="padding:8px;"><button type="bpxutton" class="btn btn-tool" data-card-widget="maximize" style="padding:3px;padding-top: 0px;margin-bottom: 0px;"><i class="fas fa-expand"></i></button></li>
                    </ul>  
                </div> 
                </div>
                <div id="demand_prod_planning_week" style="display:block ;" >
                    {% include 'app/charts/demand_prod_planning_week.html' %}
                </div>
                <div id="demand_prod_planning_month" style="display:none ;" >
                    {% include 'app/charts/demand_prod_planning_month.html' %}

                </div>
                <div class="card-footer clearfix">
                </div>
        </div> 
    </div>
</div> 


    
<!--Program demand  -->
<div class="modal" id="test_stocked" >
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">						
                <h4 class="modal-title">Informations</h4>
            </div>
            <div class="modal-body">	

            </div>
            <div class="modal-footer">
                <input type="button" href="" class="btn btn-secondary" data-dismiss="modal" value="Cancel">
                <!-- <a href="" id='targetlink' class="btn btn-danger" value="Delete">Delete</a>   -->
            </div>
        </div>
    </div>
</div>

<!--Cycle time -->
<div  class="row">
    <div class="col-12">
        <div class="card card-primary card-outline">
            <div class="card-header">
              <h3 class="card-title">
                <i class="far fa-chart-bar"></i>
                    Cycle Time
                </h3>
                <div class="card-tools"> 
                    <ul class="list-group list-group-horizontal" style="height: 35px;">
                        <li class="list-group-item" style="padding:4px;"><i type="button" data-toggle="modal" data-target="#test_stocked " class="info fas fa-info-circle" style="margin-bottom:7px;"></i></li>
                        <li class="list-group-item" style="padding:3px;"><button type="button" class="btn btn-tool" data-card-widget="collapse" style="padding:3px;padding-top: 0px;">
                            <i class="fas fa-minus"></i></button></li>
                        <li class="list-group-item" style="padding:8px;"><button type="bpxutton" class="btn btn-tool" data-card-widget="maximize" style="padding:3px;padding-top: 0px;margin-bottom: 0px;"><i class="fas fa-expand"></i></button></li>
                        
                    </ul>  
                </div> 
                </div>
                <div id="cycle_kpi_week" style="display:block ;" >
                    {% include 'app/charts/week_cycle_count.html' %}
                </div>
                <div id="cycle_kpi_month" style="display:none ;" >
                    {% include 'app/charts/month_cycle_count.html' %}

                </div>
                <div class="card-footer clearfix">
                </div>
        </div> 
    </div>
</div> 

<!-- Production plan-->
<div  class="row">
    <div class="col-12">
        <div class="card card-primary card-outline">
            <div class="card-header">
              <h3 class="card-title">
                <i class="far fa-chart-bar"></i>
                   Production Plan
                </h3>
                <div class="card-tools"> 
                    <ul class="list-group list-group-horizontal" style="height: 35px;">
                        <li class="list-group-item" style="padding:4px;"><i type="button" data-toggle="modal" data-target="#test_stocked " class="info fas fa-info-circle" style="margin-bottom:7px;"></i></li>
                        <li class="list-group-item" style="padding:3px;"><button type="button" class="btn btn-tool" data-card-widget="collapse" style="padding:3px;padding-top: 0px;">
                            <i class="fas fa-minus"></i></button></li>
                        <li class="list-group-item" style="padding:8px;"><button type="bpxutton" class="btn btn-tool" data-card-widget="maximize" style="padding:3px;padding-top: 0px;margin-bottom: 0px;"><i class="fas fa-expand"></i></button></li>
                        
                    </ul>  
                </div> 
                </div>
                <div id="production_plan_week" style="display:block ;" >
                    {% include 'app/charts/week_production_plan.html' %}
                </div>
                <div id="production_plan_month" style="display:none ;" >
                    {% include 'app/charts/month_production_plan.html' %}

                </div>
                <div class="card-footer clearfix">
                </div>
        </div> 
    </div>
</div> 

<!-- Script for Ddemand production graph  -->
<script>
    function myFunction() {
        var text_switch =document.getElementById("text_switch");
        var week_demand = document.getElementById("demand_prod_planning_week");
        var week_cycle = document.getElementById("cycle_kpi_week");
        var week_production = document.getElementById("production_plan_week");

        var month_demand = document.getElementById("demand_prod_planning_month");
        var month_cycle = document.getElementById("cycle_kpi_month");
        var month_production = document.getElementById("production_plan_month");
        var btn = document.getElementById("switch_month_week");
        
      if (week_demand.style.display === "block" & week_cycle.style.display === "block" & week_production.style.display === "block" ) {
        week_demand.style.display = "none";
        week_cycle.style.display = "none";
        week_production.style.display = "none";

        month_demand.style.display = "block";
        month_cycle.style.display = "block";
        month_production.style.display = "block";
        text_switch.textContent='W';
      }  
      else {
        week_demand.style.display = "block";
        week_cycle.style.display = "block";
        week_production.style.display = "block";

        month_demand.style.display = "none";
        month_cycle.style.display = "none";
        month_production.style.display = "none";
        text_switch.textContent='M';


      }

    }
    </script>

    <!--JS for select multiple-->
<script>
    $(document).ready(function() {
        $('#material').select2();
        $('#smooth_family').select2();

    });
</script> 




   



{% endblock content%}